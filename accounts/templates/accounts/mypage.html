<!DOCTYPE html>
<html>
<head>
    <title>ë§ˆì´í˜ì´ì§€</title>
    <style>
        .section { margin: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 10px; }
        .logo-link { text-decoration: none; color: blue; font-weight: bold; font-size: 24px; }
    </style>
</head>
<body>
    <a href="{% url 'main' %}" class="logo-link">ğŸš‡ íˆì„œë¸Œí† ë¦¬ ë©”ì¸ìœ¼ë¡œ ê°€ê¸°</a>
    
    <div class="section">
        <h3>ğŸ•’ ìµœê·¼ ë³¸ ì´ì•¼ê¸°</h3>
        <div id="recent-area">ë¡œë”© ì¤‘...</div>
    </div>

    <div class="section">
        <h3>â­ ì €ì¥í•œ ë‚´ ì´ì•¼ê¸°</h3>
        <div id="saved-area">ë¡œë”© ì¤‘...</div>
    </div>

    <script>
        async function loadMyPage() {
            const recentArea = document.getElementById('recent-area');
            const savedArea = document.getElementById('saved-area');
            try {
                // ì´ ì£¼ì†Œê°€ urls.pyì˜ 'api/mypage/'ì™€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
                const res = await fetch('/api/accounts/api/mypage/');
                const data = await res.json();
                
                recentArea.innerHTML = data.recent_stories.length ? 
                    data.recent_stories.map(s => `<li>${s.station} (${s.last_viewed})</li>`).join('') : "ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.";
                
                savedArea.innerHTML = data.saved_stories.length ? 
                    data.saved_stories.map(s => `<div><img src="${s.image}" width="100"><p>${s.station}</p></div>`).join('') : "ì €ì¥ëœ ì´ì•¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.";
            } catch (e) {
                recentArea.innerHTML = "ë°ì´í„° ë¡œë”© ì˜¤ë¥˜!";
            }
        }
        window.onload = loadMyPage;
    </script>
</body>
</html>